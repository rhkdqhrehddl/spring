<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>LG유플러스 전자결제 샘플 페이지 (XPay)</title>
		<script src="https://js.tosspayments.com/v1"></script>
		<script type="text/javascript">
			var clientKey = 'test_ck_OEP59LybZ8Bdv6A1JxkV6GYo7pRe';
			var tossPayments = TossPayments(clientKey);
			
			function LPad(digit, size, attatch) {
			    var add = "";
			    digit = digit.toString();
			
			    if (digit.length < size) {
			        var len = size - digit.length;
			        for (i = 0; i < len; i++) {
			            add += attatch;
			        }
			    }
			    return add + digit;
			}
			
			function makeoid() {
				var now = new Date();
				var years = now.getFullYear();
				var months = LPad(now.getMonth() + 1, 2, "0");
				var dates = LPad(now.getDate(), 2, "0");
				var hours = LPad(now.getHours(), 2, "0");
				var minutes = LPad(now.getMinutes(), 2, "0");
				var seconds = LPad(now.getSeconds(), 2, "0");
				var timeValue = years + months + dates + hours + minutes + seconds; 
				document.getElementById("orderId").value = "test_" + timeValue
			}
			
			/*
			* 인증요청 처리 
			*/
			function doPay() {
				// OID, TIMESTAMP 생성
				makeoid();
				// 결제창 호출
				tossPayments.requestPayment('카드', {
					  amount: document.getElementById("amount").value,
					  orderId: document.getElementById("orderId").value,
					  orderName: document.getElementById("orderName").value,
					  customerName: document.getElementById("customerName").value,
					  successUrl: window.location.origin + '/TossPG/success.do',
					  failUrl: window.location.origin + '/TossPG/fail.do',
					});
			}
		</script>
	</head>
	<body>
		<form method="post" id="LGD_PAYINFO" action="payreq_crossplatform.do">
		    <div>
		        <table>
		            <tr>
		                <td>구매자 이름 </td>
		                <td><input type="text" name="customerName" id="customerName" value="홍길동"/></td>
		            </tr>
		            <tr>
		                <td>상품정보 </td>
		                <td><input type="text" name="orderName" id="orderName" value="myLG070-인터넷전화기"/></td>
		            </tr>
		            <tr>
		                <td>결제금액 </td>
		                <td><input type="text" name="amount" id="amount" value="10000"/></td>
		            </tr>
		            <tr>
		                <td>주문번호 </td>
		                <td><input type="text" name="orderId" id="orderId" value="test_1234567890020"/></td>
		            </tr>
		            <tr>
		                <td colspan="2">
		                	<input type="button" value="결제하기" onclick="doPay();" /><br/>
		                </td>
		            </tr>
		        </table>
		    </div>
	    </form>
	</body>
</html>
